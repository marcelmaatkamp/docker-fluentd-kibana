input {

# ------------------
  stdin { }
# ------------------

# ------------------
  file {
# ------------------
    type => "syslog"
    path => [ "/var/log/*.log", "/var/log/messages", "/var/log/syslog" ]
    start_position => "end"
  }
  
# ------------------
  udp {
# ------------------
    type => "syslog"
    port => 514
  }
# ------------------
  tcp {
# ------------------
    type => "syslog"
    port => 514
  }
  
# ------------------
  udp {
# ------------------
    type => "syslog"
    port => 5514
    codec => "json"
  }
# ------------------
  tcp {
# ------------------
    type => "syslog"
    port => 5514
    codec => "json"
  }
  
# ------------------
  rabbitmq {
# ------------------
    host => "rabbitmq"
    port => 5672 
    user => "guest"
    password => "guest"
    
    exchange => "logging"
    queue => "logging.kibana"
    key => "logging"
    type => "amqp"
    
    # https://github.com/elasticsearch/logstash/tree/master/spec/codecs
    codec => "plain" 
    # codec => "json"  
 
  }
}

output {

# ------------------
  stdout {
# ------------------
    codec => rubydebug
  }

# ------------------
  elasticsearch {
# ------------------
    embedded => true
  }
  
# ------------------
  rabbitmq {
# ------------------
    host => "rabbitmq"
    port => 5672
    user => "guest"
    password => "guest"
    
    exchange => "logging"
    exchange_type => "direct"
    codec => "json"

  }
}
